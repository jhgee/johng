box: debian
build:
  steps:
    - install-packages:
        packages: git
    - script:
        name: initialize git submodules
        code: |
            git submodule update --init --recursive
    - arjen/hugo-build:
        version: "0.15"
    # - script:
    #     name: copy output directory
    #     code: |
    #       cp * -R $WERCKER_OUTPUT_DIR
deploy:
  steps:
    - install-packages:
        packages: lftp
    - script:
        name: prepare lftp settings
        code: |
          mkdir -p $HOME/.lftp
          echo "set ssl:verify-certificate no" > $HOME/.lftp/rc
    - script:
      name: lftp deploy
      code: |
        lftp sftp://$USER:$PASS@$HOST  -e "set ftp:ssl-allow no; mirror  --reverse -e -R $WERCKER_ROOT/public / --verbose; bye"
    #
    # - install-packages:
    #     packages: curl
    # - duleorlovic/ftp-deploy:
    #     basedir: public/
    #     destination: ftp://$HOST/
    #     username: $USER
    #     password: $PASS
